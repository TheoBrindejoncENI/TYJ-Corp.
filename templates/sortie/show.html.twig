{% extends 'base.html.twig' %}

{% block title %}Sortie{% endblock %}

{% block body %}
    <div class="float-right">
        <a class="btn btn-success" href="#"><i class="fas fa-check"></i> Je m'inscris !</a>
        <a class="btn btn-info" href="{{ path('sortie_edit', {'id': sortie.id}) }}">Modifier la sortie</a>
    </div>
    <h1>{{ sortie.nom }}</h1>
    <br />
    <div class="row">
        <div class="col-md-8">
            <table class="table">
                <tbody>
                <tr>
                    <th>Organisé par</th>
                    <td><a href="{{ path('participant_show', {'id': sortie.getOrganisateur().id}) }}">{{ sortie.getOrganisateur() }}</a></td>
                </tr>
                <tr>
                    <th>Quand ?</th>
                    <td>{{ sortie.dateHeureDebut ? sortie.dateHeureDebut|date('d/m/Y H:i') : '' }}</td>
                </tr>
                <tr>
                    <th>Durée</th>
                    <td>{{ sortie.duree }} minutes</td>
                </tr>
                <tr>
                    <th>Date limite d'inscription</th>
                    <td>{{ sortie.dateLimiteInscription ? sortie.dateLimiteInscription|date('d/m/Y H:i') : '' }}</td>
                </tr>
                <tr>
                    <th>Maximum de participants</th>
                    <td>{{ sortie.nbInscriptionsMax }}</td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="col-md-4">
            <h4>Participants</h4>
            {% for participant in sortie.getInscrits() %}
                <a href="{{ path('participant_show', {'id': participant.id}) }}">{{ participant }}</a>
            {% else %}
                <p>Aucun participant pour le moment !</p>
            {% endfor %}
        </div>
    </div>

    <h4>Détails</h4>
    <p>{{ sortie.infosSortie }}</p>
    <div class="row">
        <div class="col-md-8">
            <div id="map"></div>
            <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCi6mUxuH2NJzWGtVAjd8N_YXlKrsERVks&callback=initMap"
                    async defer></script>
            <script>
                var map;
                function initMap() {
                    map = new google.maps.Map(document.getElementById('map'), {
                        center: {lat: {{sortie.getLieu().getLatitude()}}, lng: {{sortie.getLieu().getLongitude()}}},
                        zoom: 14
                    });
                }
            </script>
        </div>
        <div class="col-md-4">
            <h4>Localisation</h4>
            <p>{{sortie.getLieu()}}<br />{{ sortie.getLieu().getRue() }}<br />{{ sortie.getLieu().getVille() }}</p>
        </div>
    </div>

{% endblock %}
