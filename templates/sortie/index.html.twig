{% extends 'base.html.twig' %}

{% block title %}Sortons !!{% endblock %}

{% block body %}
    <script src="{{ asset('js/filterTable.js')}}"></script>
<h1>Sortons !!</h1>
<br>
	<h5>Filtrez les sorties :</h5>
    <form>
        <div class="row form-group">
            <div class="col">
                <div class="input-group input-group-sm mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text" for="inputGroupSelect01">Site :</span>
                    </div>
                    <select class="custom-select" id="searchSite" aria-label="Cherchez sur un site" id="inputGroupSelect01">
                        <option selected>{{ participant.site }}</option>
                        {% for site in sites %}
                                
                        <option selected>{{ site.nom }}</option>
                        {% else %}
                            
                        <option option>Pas de site</option>
                        {% endfor %}
                        
                    </select>
                </div>
                <div class="input-group input-group-sm mb-3">
                    <input type="text" class="form-control" name="searchInput" id="searchInput" onkeyup="searchinTable()" aria-label="Cherchez une sortie" aria-describedby="inputGroup-sizing-sm" placeholder="Cherchez une sortie">
                    </div>
                    <div class='row'>
                        <div class='col'>
                            <span>De :</span>
                            <div class="form-group">
                                <div class="input-group-sm date" id="datetimepicker7" data-target-input="nearest">
                                    <div class="input-group-append" data-target="#datetimepicker7" data-toggle="datetimepicker">
                                        <div class="input-group-text">
                                            <i class="fa fa-calendar"></i>
                                        </div>
                                    </div>
                                    <input type="text" class="form-control datetimepicker-input" data-target="#datetimepicker7"/>
                                </div>
                            </div>
                        </div>
                        <div class='col'>
                            <span>à</span>
                            <div class="form-group">
                                <div class="input-group-sm date" id="datetimepicker8" data-target-input="nearest">
                                    <input type="text" class="form-control sm datetimepicker-input" data-target="#datetimepicker8"/>
                                    <div class="input-group-append" data-target="#datetimepicker8" data-toggle="datetimepicker">
                                        <div class="input-group-text">
                                            <i class="fa fa-calendar"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="col form-check">
                        <div class="input-group-sm">
                            <div class="row">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="" id="myEvent">
                                            <label type="form-check-label" for="myEvent">Sorties dont je suis l'organistaur/trice</label>
                                        </div>
                                    </div>
                            <div class="row">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="" id="myEventRegister">
                                        <label type="form-check-label" for="myEventRegister">Sorties auxquelles je suis inscrit/e</label>
                                    </div>
                            </div>
                            <div class="row">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="" id="myEventNoRegister">
                                        <label type="form-check-label" for="myEventNoRegister">Sorties auxquelles je ne suis pas inscrit/e</label>
                                    </div>
                            </div>
                            <div class="row">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="" id="pastEvent">
                                        <label type="form-check-label" for="pastEvent">Sorties passées</label>
                                    </div>
                            </div>
                            <div class="row">
                                <br>
                                <button type="button" class="btn btn-success">Rechercher</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>

							<div class="container">
								<table class="table" id="sortieTable" name="sortieTable" >
									<thead>
										<tr>
											<th>Quoi ?</th>
											<th>Quand ?</th>
											<th>Durée</th>
											<th>Places</th>
											<th></th>
										</tr>
									</thead>
									<tbody>
        {% for sortie in sorties %}
            
										<tr>
											<td>{{ sortie.nom }}</td>
											<td>{{ sortie.dateHeureDebut ? sortie.dateHeureDebut|date('d/m/Y H:i') : '' }}</td>
											<td>{{ sortie.duree }} min.</td>
											<td>{{ sortie.inscrits|length}}/{{ sortie.nbInscriptionsMax ?? '&infin;' }}</td>
											<td>
												<a class="btn btn-sm btn-outline-primary" href="{{ path('sortie_show', {'id': sortie.id}) }}">Voir</a>
											</td>
										</tr>
        {% else %}
            
										<tr>
											<td colspan="8">Aucune sortie trouvée !</td>
										</tr>
        {% endfor %}
        
									</tbody>
								</table>
								<a class="btn btn-success" href="{{ path('sortie_new') }}">Créer une sortie</a>
							</div>
{% endblock %}
